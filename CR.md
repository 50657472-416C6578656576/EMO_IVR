---
ТЗ по разработке мессенджера "ЭМО"'
---

Общая информация о продукте:
============================

ЭМО - мессенджер для детей с выраженными интеллектуальными нарушениями,
с помощью которого ребята готовятся к использованию WhatsApp - обычного,
наиболее популярного мессенджера.

Пользователи в основном не умеет писать и читать предложения, некоторые
ребята могут узнавать слова целиком (глобально), но понимают информацию
по картинкам (этому их учат на других специальных занятиях педагоги).

Соответственно, в мессенджере ЭМО дети общаются с помощью картинок, но
возможность отправить слово или короткое предложение тоже есть.

Все кнопки и шрифт увеличены в размере, так как у детей есть моторные
проблемы, а также символы должны привлекать внимание. Количество их
сокращено на экране; для того, чтобы увидеть весь "список", нужно
скролить.

Это учебный мессенджер, пользование мессенджером происходит в процессе
учебных занятий, то есть совместно со взрослым.

**Общая техническая часть (вариант реализации):**

Используем стек MEAN:

-   MongoDB -- база данных для хранения данных о пользователях,
    картинок-сообщений и др..

-   Express.js -- фреймворк для веб-приложения.

-   Node.js - программная платформа

Серверная часть
===============

База данных
-----------

На сервере с использованием MongoDB нужно сделать базу данных, которая
содержит 3 сущности:

1- ["Пользователи"] - профили пользователей

-   логин,

-   пароль,

-   фамилия,

-   имя,

-   email,

-   фото,

-   наименование учреждения,

-   список идентификаторов пользователей-друзей ("контакты");

2 - ["Сообщения" -] база сообщений. Сообщение содержит:

-   тело сообщения - текст или идентификатор картинки,

-   идентификаторы отправителя и получателя,

-   временные метки отправки и получения.

3- ["Картинки" -] база картинок, в которой д.б. 4
библиотеки: вопросы, ответы, стикеры, фотографии. Каждая картинка имеет
идентификатор. Система пересылает идентификаторы.

Сервисы
-------

На серверной части необходимо реализовать три группы сервисов:

### I. сервисы авторизации и доступа к данным профилей пользователей. 

I.1. **Сервис авторизации**. При вхождении в приложение пользователь (на
практике это делает взрослый, который сопровождает ребенка) должен
ввести логин и пароль, система делает запрос в базу данных пользователей
и идентифицирует пользователя возвращает информацию из профиля
пользователя в базе, или выдает информацию, что такого пользователя нет,
тогда нужно зарегистрироваться.

I.2. **Сервис регистрации** записывает в базу информацию о новом
пользователе.

I.3. **"Поиск друзей".** Сервис, возвращающий список зарегистрированных
пользователей по совпадению одного из параметров профиля: имени,
фамилии, наименования учреждения.

I.4. **"Добавить друга"** Сервис, добавляющий пользователя в "контакты".
Добавляет один или несколько идентификаторов пользователей в список
идентификаторов друзей данному пользователю. Он должен проверять, что в
списке друзей идентификаторы не дублируются.

I.5. **"Удалить друга"** Сервис удаления пользователя из "контактов" -
удаляет указанный идентификатор пользователя из списка контактов в
профиле данного пользователя.

### II сервисы отправки/получения сообщений.

II.1. **Сервис отправки сообщения** - должен положить сообщение в базу
данных "сообщения", записав идентификаторы отправителя, получателя, тип
сообщения (картинка или текст) сообщения, содержание сообщения
(идентификатор картинки или тест) и время отправки.

II.2. **Сервис получения сообщения** - по указанным в запросе двум
идентификаторам пользователей возвращает из базы Сообщений все
сообщения, где указанные два пользователя являются отправителем или
получателем. Сервис должен дополнительно иметь параметры - количество
возвращаемых сообщений и идентификатор, начиная с какого возвращать.
Возвращая сообщения, сервис должен проверять временную метку прочтения
сообщения и, если она не заполнена, ставить текущую дату-время.

### III. Сервисы работы с картинками.

III.1. Записать картинку в базу - записывает изображение в базу Картинок
и возвращает идентификатор картинки. На вход принимает изображение в
виде файла и идентификатор библиотеки.

III.2. Запросить картинку - возвращает из базы картинку по заданному
идентификатору.
